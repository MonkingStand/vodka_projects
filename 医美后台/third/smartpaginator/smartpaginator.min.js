(function(s){s.fn.extend({smartpaginator:function(a){var e=s.extend({totalrecords:0,recordsperpage:0,length:10,next:"下一页",prev:"上一页",first:"首页",last:"尾页",go:"跳转",theme:"theme",display:"double",initval:1,datacontainer:"",dataelement:"",onchange:null,controlsalways:!1},a);return this.each(function(){function a(s){p.find(".records-info-container").remove();var a='<div class="records-info-container"><span>共<b>&nbsp;'+Math.ceil(e.totalrecords/e.recordsperpage)+"&nbsp;</b>页，每页&nbsp;<b>"+e.recordsperpage+"&nbsp;</b>条</span></div>";p.append(a)}function t(t){y.find("li").remove();for(var d=t;d<t+e.length&&d!=c;d++)y.append(s("<li/>").append(s("<a>").attr("id",d+1).addClass(e.theme).addClass("normal").attr("href","javascript:void(0)").text(d+1)).click(function(){e.totalrecords>e.recordsperpage&&(i=t+s(this).closest("li").prevAll().length,l(i))}));a(t),C.val(t+1),y.find("li a").addClass(e.theme).removeClass("active"),y.find("li:eq(0) a").addClass(e.theme).addClass("active");y.find("li:eq(0) a").outerWidth()+2*parseInt(y.find("li:eq(0)").css("margin-left"));n(t)}function l(l){var d=l,r=e.length/2;e.length%2>0&&(r=(e.length+1)/2);var p=0;if(l>=0&&l<c){l>=r&&(c-l>r?p=l-(r-1):c>e.length&&(p=c-e.length)),t(p),a(i),y.find("li a").removeClass("active"),C.val(i+1),y.find('li a[id="'+(d+1)+'"]').addClass("active");var f=i*e.recordsperpage,g=f+e.recordsperpage;if(g>e.totalrecords&&(g=e.totalrecords%g),o&&null!=e.onchange&&e.onchange(i+1,f,g),null!=v&&v.length>0){h.css("display","none"),s(h[0]).find("th").length>0&&(s(h[0]).css("display",""),f++,g++);for(var u=f;u<g;u++)s(h[u]).css("display","")}n()}}function n(){c>e.length?(i>0?e.controlsalways?f.css("display","").removeClass("disabled"):f.css("display",""):e.controlsalways?f.css("display","").addClass("disabled"):f.css("display","none"),i>e.length/2-1?e.controlsalways?u.css("display","").removeClass("disabled"):u.css("display",""):e.controlsalways?u.css("display","").addClass("disabled"):u.css("display","none"),i==c-1?e.controlsalways?g.css("display","").addClass("disabled"):g.css("display","none"):e.controlsalways?g.css("display","").removeClass("disabled"):g.css("display",""),c>e.length&&i<c-e.length/2-1?e.controlsalways?b.css("display","").removeClass("disabled"):b.css("display",""):e.controlsalways?b.css("display","").addClass("disabled"):b.css("display","none")):e.controlsalways?(u.css("display","").addClass("disabled"),f.css("display","").addClass("disabled"),g.css("display","").addClass("disabled"),b.css("display","").addClass("disabled")):(u.css("display","none"),f.css("display","none"),g.css("display","none"),b.css("display","none"))}function d(s){var a=s.get(0).selectionStart,e=s.get(0).selectionEnd,t=document.selection;return!(!t||0==t.createRange().text.length)||!t&&0!=s.val().substring(a,e).length}var i=0,r=0,c=parseInt(e.totalrecords/e.recordsperpage);e.totalrecords%e.recordsperpage>0&&c++;var o=!1,p=s(this).addClass("smart-pager").addClass(e.theme);p.find("ul").remove(),p.find("div").remove(),p.find("span").remove();var v,h;""!=e.datacontainer&&(v=s("#"+e.datacontainer),h=s(""+e.dataelement,v));var y=s("<ul/>"),f=s("<div/>").text(e.prev).click(function(){return!s(this).hasClass("disabled")&&(i=parseInt(y.find("li a.active").text())-1,void l(--i))}).addClass("pager-btn"),g=s("<div/>").text(e.next).click(function(){return!s(this).hasClass("disabled")&&(i=parseInt(y.find("li a.active").text()),void l(i))}).addClass("pager-btn"),u=s("<div/>").text(e.first).click(function(){return!s(this).hasClass("disabled")&&(i=0,void l(0))}).addClass("pager-btn"),b=s("<div/>").text(e.last).click(function(){return!s(this).hasClass("disabled")&&(i=c-1,void l(i))}).addClass("pager-btn"),C=s("<input/>").attr("type","text").keydown(function(s){if(d(C)&&C.val(""),s.which>=48&&s.which<58){var a=parseInt(C.val()+(s.which-48));a>0&&a<=c||s.preventDefault()}else 8!=s.which&&46!=s.which&&s.preventDefault()}),m=s("<input/>").attr("type","button").attr("value",e.go).click(function(){return C.val()!=s(".smart-pager a.theme.active").text()&&(""!=C.val()&&(i=parseInt(C.val())-1,void l(i)))});p.append(u).append(f).append(y).append(g).append(b).append(s("<div/>").addClass("short").append(C).append(m)),"single"==e.display&&(m.css("display","none"),C.css("display","none")),t(r),0==e.initval&&(e.initval=1),i=e.initval-1,l(i),o=!0})}})})(jQuery);