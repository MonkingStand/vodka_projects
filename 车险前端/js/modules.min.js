var defaultConfig={domain:"http://"+document.URL.split("/")[2],project:"",jdUrl:"https://h5pay.jd.com/jdpay/saveOrder",ossPre:"http://znzzc-vodka-insurance-online.oss-cn-shanghai.aliyuncs.com"};(function(e){e.ajaxAction=function(t,a,i,n){e.ajax({url:t,type:"post",dataType:"json",data:a,success:function(e){i(e)},error:function(e){n(e)}})},e.transferJsonData=function(e){var t=JSON.stringify(e);return{data:t}},e.getParameter=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?decodeURI(a[2]):null},e.setCookie=function(e,t,a){var i="",n=a?1e3*a:0;if(0!=n){var o=new Date;o.setTime(o.getTime()+n),i="; expires="+o.toGMTString()}document.cookie=e+"="+escape(t)+i+"; path=/"},e.getCookie=function(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return unescape(n.substring(t.length,n.length))}return!1},e.clearCookie=function(t){e.setCookie(t,"",-1)},e.formatTime=function(e,t){var a=String(e).indexOf("-")==-1&&String(e).indexOf(".")==-1?parseInt(e):e,i=new Date(a),n=1==String(parseInt(i.getMonth())+1).length?"0"+(parseInt(i.getMonth())+1):parseInt(i.getMonth())+1,o=1==String(parseInt(i.getDate())).length?"0"+parseInt(i.getDate()):parseInt(i.getDate()),r=i.getFullYear()+"-"+n+"-"+o,s=1==String(i.getHours()).length?"0"+i.getHours():i.getHours(),l=1==String(i.getMinutes()).length?"0"+i.getMinutes():i.getMinutes(),d=1==String(i.getSeconds()).length?"0"+i.getSeconds():i.getSeconds(),c=s+":"+l+":"+d;return t&&"full"==t?r+" "+c:r},e.submitObj=function(t){var a=t?t:".submit-input",i={};return e(a).each(function(){var t=e(this).attr("id")?e(this).attr("id"):"";val=e(this).val(),t&&(i[t]=val)}),i},e.autoFill=function(t,a){var i=1==arguments.length?"":a;if(t)for(var n in t)e("#"+i+n).val(t[n]),e("#"+i+n).text(t[n])},e.singleRadio=function(t){var a=t?t:[0,1];e(".item-single-radio").on("click",function(){var t=e(this),i=e(this).find("input");t.hasClass("active")?(t.removeClass("active"),i.val(a[0])):(t.addClass("active"),i.val(a[1]))})},e.radioModal=function(t,a,i){for(var n=t,a=a,o=a.textArr.length,r="",s='<ul class="radio-list">',l=0;l<o;l++)r=a.selectedIndex==l?"checked":"",s+='<li><label class="label-checkbox"><div class="item-inner"><div class="item-title-row"><div class="item-title">'+a.textArr[l]+'</div></div><input type="radio" name="test" value="'+a.valArr[l]+'" '+r+'><div class="item-media"><i class="selected-icon"></i></div></div></label></li>';s+="</ul>",e.modal({extraClass:"radio-modal",text:s}),e(".radio-modal label").on("click",function(){var t=e(this).find("input").val(),a=e(this).find(".item-title").text();n.find("span.radio-val").attr("data-val",t).text(a),n.find("input.radio-val").attr("data-val",t).val(a),i&&i(),e.closeModal()}),e(".modal-overlay-visible").on("click",function(){e.closeModal()})},e.uploadImg={init:function(){this.checkUploadStatus(),this.domListener()},domListener:function(){var t=this;e(".upload-img-page").on("click",".img-input",function(){e.showIndicator(),setTimeout(function(){e.hideIndicator()},250)}).on("change",".img-input",function(a){var i=a.target.files[0],n=parseInt(i.size/1024);e.showIndicator(),t.imgPreview(i,n),e(this).closest(".upload-img-page").find(".upload-status").removeClass("init has-uploaded").addClass("not-uploaded")}),e(".upload-img-page .save-btn").on("click",function(){var a=e.getParameter("imgType"),i=e.getParameter("imgName");t.uploadImg(a,i)})},checkUploadStatus:function(){var t=Boolean(parseInt(e.getParameter("uploaded"))),a=e.getParameter("viewUrl"),i=e.getParameter("originUrl");t?(e(".upload-img-page .img-container").removeClass("not-uploaded").append('<img class="tmp-upload" src="'+a+"?"+Number(new Date)+'">'),e(".upload-img-page .upload-status").removeClass("init not-uploaded").addClass("has-uploaded")):e(".upload-img-page .img-container").removeClass("not-uploaded").append('<img class="tmp-upload" src="'+i+"?"+Number(new Date)+"\" onerror=\"$('.upload-img-page .img-container').addClass('not-uploaded');$('.tmp-upload').remove()\">")},imgPreview:function(t,a){var i=document.createElement("img");i.classList.add("tmp-upload"),i.setAttribute("id","tmpUploadImg"),i.file=t;var n=new FileReader;n.onload=function(e){return function(t){e.src=t.target.result,imgSrc=e.src}}(i),n.readAsDataURL(t),e(".upload-img-page .img-container .tmp-upload").remove(),e(".upload-img-page .img-container").removeClass("not-uploaded"),e(".upload-img-page .img-container").append(i),setTimeout(function(){e.hideIndicator(),e(".upload-img-page .save-btn").removeClass("click-ban")},1e3)},uploadImg:function(t,a){var i={ossPath:t},n=function(i){var n=i.object,o=document.URL;o.indexOf("init=1")!=-1&&(o=o.replace("init=1","init=0")),o.indexOf("uploaded")==-1&&(o+="&uploaded=1"),o.indexOf("viewUrl")==-1&&(o+="&viewUrl="+n.ossReadDomain+"/"+t+"/"+a+".jpg"),"fail"==i.status?(e.hideIndicator(),e.alert("上传功能初始化失败<br>请稍后重试")):(e('input[name="OSSAccessKeyId"]').val(n.accessid),e('input[name="policy"]').val(n.policy),e('input[name="Signature"]').val(n.signature),e('input[name="key"]').val(n.dir+a+".jpg"),e('input[name="success_action_redirect"]').val(o),setTimeout(function(){e("#uploadForm").attr("action",n.host).submit()},500))},o=function(t){e.alert("上传功能暂不可用<br>请稍后重试")};e.showIndicator(),e.ajaxAction(defaultConfig.domain+defaultConfig.project+"/oss/signBeforePutObject.json",i,n,o)}},e.saveUserInfo=function(t){e.setCookie("loginUserId",t.userId,3600),e.setCookie("loginUserName",t.realName?t.realName:"--",3600),e.setCookie("loginUserMobile",t.mobile,3600),e.setCookie("loginUserPassword",t.password,3600),e.setCookie("loginUserReal",t.realCheck,3600),e.setCookie("loginUserRole",t.role,3600),e.setCookie("loginUserSex",t.sex,3600),e.setCookie("loginUserIdCard",t.idCard,3600)},e.checkCarNo=function(e){var t=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/;return!!t.test(e)},e.checkIdCardNo=function(e){var t=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;return!!t.test(e)},e.orderStatusTrans=function(e){var t="";switch(parseInt(e)){case 0:t="未提交";break;case 2:t="待审核";break;case 3:t="审核未通过";break;case 4:t="待审批";break;case 5:t="借款审批未通过";break;case 1:t="借款详情待确认";break;case 6:t="财务未放款";break;case 7:t="财务已放款";break;case 8:t="已退单";break;case 9:t="已退单";break;case 10:t="已退单"}return t}})(Zepto),window.defaultConfig=defaultConfig;